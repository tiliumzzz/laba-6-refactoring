# Лабораторная работа: Рефакторинг order_processing.py

## Цель работы
Отрефакторить код обработки заказов, улучшив его читаемость и поддерживаемость, не изменив поведение.

## Исходный код
Исходный код содержал одну большую функцию `process_checkout()` длиной 80+ строк, которая выполняла все операции: парсинг запроса, валидацию, расчёты и форматирование.

## Обнаруженные проблемы качества

### 1. Нарушение принципа единственной ответственности (SRP)
Функция `process_checkout()` делала слишком много:
- Парсила входные данные
- Валидировала их
- Выполняла бизнес-расчёты (скидки, налоги)
- Форматировала результат

### 2. "Магические числа" в коде
В коде были "зашиты" числовые константы:
- `0.21` — ставка налога
- `0.10`, `0.20`, `0.05` — проценты скидок
- `50`, `10` — фиксированные скидки
- `100`, `200` — пороговые значения

### 3. Высокая цикломатическая сложность
Множество вложенных условий и циклов в одной функции.

### 4. Проблемы с тестируемостью
Невозможно было протестировать отдельные части логики (например, только расчёт скидки).

## Применённые рефакторинги

### 1. Вынесение констант
Все "магические числа" вынесены в именованные константы в начале файла:
```python
DEFAULT_CURRENCY = "USD"
TAX_RATE = 0.21
COUPON_SAVE10_RATE = 0.10
# и т.д.
